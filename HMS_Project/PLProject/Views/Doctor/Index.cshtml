@model IEnumerable<DoctorViewModel>
@{
	ViewData["Title"] = "doctors";
	ViewData["User"] = "doctor";
}
<div class="container mt-5">

	<!-- Success Message -->
	@if (TempData["SuccessMessage"] != null)
	{
		<div class="alert alert-success alert-dismissible fade show" role="alert" id="SuccessMessage">
			@TempData["SuccessMessage"]
			<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
		</div>
	}

	<h1 class="display-4 text-center mb-4"> All @ViewData["Title"] </h1>

	<!-- Action Buttons -->
	<div class="d-flex justify-content-between mb-3">
		<a asp-action="Create" class="btn btn-success btn-lg px-4"> <i class="fas fa-plus"></i> Create New @ViewData["User"] </a>
		<a asp-action="AddSpecialization" class="btn btn-primary btn-lg px-4"> <i class="fas fa-user-md"></i> Add Doctor Specialization</a>
	</div>

	@if (Model.Any())
	{
		<!-- Doctors Table -->
		<div class="table-responsive">
			<table class="table table-striped table-hover align-middle">
				<thead class="table-dark">
					<tr>
						<th>@Html.DisplayNameFor(N => N.FirstName)</th>
						<th>@Html.DisplayNameFor(N => N.LastName)</th>
						<th>@Html.DisplayNameFor(N => N.Email)</th>
						<th>@Html.DisplayNameFor(N => N.Phone)</th>
						<th>@Html.DisplayNameFor(N => N.Gender)</th>
						<th>@Html.DisplayNameFor(N => N.DateOfBirth)</th>
						<th>Details</th>
						<th>Update</th>
						<th>Delete</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var User in Model)
					{
						<tr>
							<td>@Html.DisplayFor(D => User.FirstName)</td>
							<td>@Html.DisplayFor(D => User.LastName)</td>
							<td>@Html.DisplayFor(D => User.Email)</td>
							<td>@Html.DisplayFor(D => User.Phone)</td>
							<td>@Html.DisplayFor(D => User.Gender)</td>
							<td>@Html.DisplayFor(D => User.DateOfBirth)</td>

							<!-- Action Buttons as a Partial View -->
							<partial name="_ButtonsPartial" model="@User.Id"></partial>
						</tr>
					}
				</tbody>
			</table>
		</div>
	}
	else
	{
		<div class="alert alert-warning mt-4">
			<h3 class="text-center"> No doctors found!</h3>
			<p class="text-center">You can add a new doctor by clicking the "Create New Doctor" button above.</p>
		</div>
	}
</div>

@section Scripts {
	<script>
		// Automatically hide the success message after 5 seconds (5000 milliseconds)
		$(document).ready(function () {
			setTimeout(function () {
				$('#SuccessMessage').fadeOut('slow');
			}, 5000); // 5000 ms = 5 seconds
		});
	</script>
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
}
